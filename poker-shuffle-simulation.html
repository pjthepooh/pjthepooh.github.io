<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8"> 
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="PJ" />
        <meta name="copyright" content="PJ" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="statistics, probability, simulation, python, random, Data Science, " />

<meta property="og:title" content="Poker Shuffle Simulation "/>
<meta property="og:url" content="http://www.pjthepooh.com/poker-shuffle-simulation.html" />
<meta property="og:description" content="" />
<meta property="og:site_name" content="PJ the Pooh" />
<meta property="og:article:author" content="PJ" />
<meta property="og:article:published_time" content="2017-03-04T20:00:00-08:00" />
<meta property="" content="2018-04-14T01:15:00-07:00" />
<meta name="twitter:title" content="Poker Shuffle Simulation ">
<meta name="twitter:description" content="">

        <title>Poker Shuffle Simulation  Â· PJ the Pooh
</title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="http://www.pjthepooh.com/theme/css/pygments.css" media="screen">
        <link rel="stylesheet" type="text/css" href="http://www.pjthepooh.com/theme/tipuesearch/tipuesearch.css" media="screen">
        <link rel="stylesheet" type="text/css" href="http://www.pjthepooh.com/theme/css/elegant.css" media="screen">
        <link rel="stylesheet" type="text/css" href="http://www.pjthepooh.com/theme/css/custom.css" media="screen">
        <link href="http://www.pjthepooh.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="PJ the Pooh - Full Atom Feed" />
        <!-- Using MathJax, with the delimiters $ -->
        <!-- Conflict with pygments for the .mo and .mi -->
        <script type="text/x-mathjax-config">
          MathJax.Hub.Config({
          "HTML-CSS": {
          styles: {
          ".MathJax .mo, .MathJax .mi": {color: "black ! important"}}
          },
          tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']],processEscapes: true}
          });
        </script>
        <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
    </head>
    <body>
        <div id="content-sans-footer">
        <div class="navbar navbar-static-top">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="http://www.pjthepooh.com/"><span class=site-name>PJ the Pooh</span></a>
                    <div class="nav-collapse collapse">
                        <ul class="nav pull-right top-menu">
                            <li ><a href="http://www.pjthepooh.com">Home</a></li>
                            <li ><a href="http://www.pjthepooh.com/pages/../about.html">About</a></li>
                            <li ><a href="http://www.pjthepooh.com/pages/../bookmarks.html">Bookmarks</a></li>
                            <li ><a href="http://www.pjthepooh.com/categories.html">Categories</a></li>
                            <li ><a href="http://www.pjthepooh.com/tags.html">Tags</a></li>
                            <li ><a href="http://www.pjthepooh.com/archives.html">Archives</a></li>
                            <li><form class="navbar-search" action="http://www.pjthepooh.com/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span1"></div>
                <div class="span10">
<article>
<div class="row-fluid">
    <header class="page-header span10 offset2">
    <h1><a href="http://www.pjthepooh.com/poker-shuffle-simulation.html"> Poker Shuffle Simulation  </a></h1>
    </header>
</div>

<div class="row-fluid">
    <div class="span2 table-of-content">
        <nav>
        <h4>Contents</h4>
        <div id="toc"><ul><li><a class="toc-href" href="#introduction" title="Introduction">Introduction</a></li><li><a class="toc-href" href="#strategies" title="Strategies">Strategies</a><ul><li><a class="toc-href" href="#bottom-up-shuffle" title="Bottom-up Shuffle">Bottom-up Shuffle</a></li><li><a class="toc-href" href="#riffle-shuffle" title="Riffle Shuffle">Riffle Shuffle</a><ul><li><a class="toc-href" href="#complete-riffle-shuffle" title="Complete Riffle Shuffle">Complete Riffle Shuffle</a></li><li><a class="toc-href" href="#random-riffle-shuffle" title="Random Riffle Shuffle">Random Riffle Shuffle</a></li></ul></li></ul></li><li><a class="toc-href" href="#simulation-and-evaluation_2" title="Simulation and Evaluation">Simulation and Evaluation</a></li><li><a class="toc-href" href="#result" title="Result">Result</a></li><li><a class="toc-href" href="#ending" title="Ending">Ending</a></li></ul></div>
        </nav>
    </div>
    <div class="span8 article-content">

            
            <h1 id="introduction">Introduction</h1>
<p>I grew up playing poker with my friends and family. Ever since I was little, I have been interested in the math behind poker games and board games. Because of the complexity of the game rules, it is not often intuitive to figure out the optimal strategy of the game or even just write down its objective function. However, the simulation approach helps us understand the game. The better you understand probability distribution of the outcomes from your move, the better strategy you can make, thus the higher chance of winning.  </p>
<p>When playing a poker game, players usually take turns shuffling the deck of cards. This seemly small feat, determines what hand you will get. But many people do not pay attention to the randomization of the cards. Is your usual shuffling method good enough?  Does one strategy outperform the others?  Do you shuffle too few or too many times? In this post, I am going to simulate different poker shuffle strategies and answer the questions above.</p>
<p>Suppose we label the 52 cards in a standard deck as 1, 2, ..., 52 and start with a deck (or state) $X_0$ which is sorted from 1 to 52. Then we simulate the following different shuffling processes iteratively from $X_{t-1}$ to $X_{t}$.</p>
<h1 id="strategies">Strategies</h1>
<h2 id="bottom-up-shuffle">Bottom-up Shuffle</h2>
<p>This is a very popular strategy in China because it is quick and easy to execute. Even if you have never seen this, it is not hard to imagine how it works from the name. Basically, the player casually holds the top n numbers of cards in one hand and move the bottom 52-n cards on top with the other hand, where n is supposed to change after each shuffle but targeting 1 &lt;&lt; n &lt;&lt; 52. This method is simple, though I rarely see people use it in America. </p>
<p><center><img alt="Bottom Up Shuffle" src="images/poker_shuffle_simulation/bottom_up_shuffle.png" width="300"/></center></p>
<p>There are other strategies similar to that. For example, people, including myself, like to perform full-deck bottom-up shuffle (where you hold the initial n number of cards from the bottom half of the deck and continue to shuffle it bottom-up, without releasing the initial last few cards, making n smaller and smaller). However, this strategy is hard to standardize, so I'm not going to include it here.</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">bottom_up</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">deck</span><span class="p">):</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">deck</span><span class="p">)</span>
    <span class="n">n_cards</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">n</span> <span class="o">*</span> <span class="mf">0.25</span><span class="p">,</span> <span class="n">n</span> <span class="o">*</span> <span class="mf">0.75</span><span class="p">)</span>  <span class="c1"># hardcoded the middle 50%</span>
    <span class="n">shuffled</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">deck</span><span class="p">[</span><span class="n">n_cards</span><span class="p">:])</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">deck</span><span class="p">[:</span><span class="n">n_cards</span><span class="p">])</span>
</pre></div>
<h2 id="riffle-shuffle">Riffle Shuffle</h2>
<p>This is the most popular hand shuffle strategy in the poker world. Per my observation, almost every poker dealer in a casino uses this strategy. The shuffling process looks like this, 1) the player splits the deck into two roughly equal parts, holding one half in each hand; 2) release the cards from both hands simultaneously, and stack the cards alternatively from each side. However, this strategy can easily be performed differently by different people. Here I break it into two main differences. </p>
<p><center><img alt="Riffle Shuffle Demo" src="images/poker_shuffle_simulation/riffle_shuffle.jpg" width="300"/></center></p>
<h3 id="complete-riffle-shuffle">Complete Riffle Shuffle</h3>
<p>This strategy is when the two halves of the cards alternatively stack on top of each other one by one. This can usually be seen in performances of professional dealers or cardistry. The main reason people would do so is that this strategy can minimize the friction among the cards after the mix, which allows the players to smoothly execute a following move, eg: a bridge, to recover the deck into a uniform shape. One needs lots of practice to acquire such skill, however, it looks really cool!</p>
<p><center><img alt="Complete Riffle Shuffle" src="images/poker_shuffle_simulation/complete_riffle_shuffle.png" width="450"/></center></p>
<p>The implementation of this is simple. Given a sorted list, break it into two halves. Going through each list, inserting a element from a list followed by one from the other list, and continuing on with the next elements. Something to be careful about, is that we shouldn't always start with the 1st insert from the same list (i.e. don't always release the card from the same hand first every time), because if you do so, the first and the last element won't be shuffled (i.e. the top and bottom cards are always the same regardless of number of shuffles).</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">complete_riffle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">deck</span><span class="p">):</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">deck</span><span class="p">)</span>
    <span class="n">x_l</span><span class="p">,</span> <span class="n">x_r</span> <span class="o">=</span> <span class="n">deck</span><span class="p">[:</span><span class="n">n</span><span class="o">/</span><span class="mi">2</span><span class="p">],</span> <span class="n">deck</span><span class="p">[</span><span class="n">n</span><span class="o">/</span><span class="mi">2</span><span class="p">:]</span>
    <span class="n">shuffled</span> <span class="o">=</span> <span class="p">[</span><span class="bp">None</span><span class="p">]</span> <span class="o">*</span> <span class="n">n</span>
    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">:</span>
        <span class="n">shuffled</span><span class="p">[::</span><span class="mi">2</span><span class="p">],</span> <span class="n">shuffled</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">x_l</span><span class="p">,</span> <span class="n">x_r</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">shuffled</span><span class="p">[::</span><span class="mi">2</span><span class="p">],</span> <span class="n">shuffled</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">x_r</span><span class="p">,</span> <span class="n">x_l</span>
    <span class="k">return</span> <span class="n">shuffled</span>
</pre></div>
<h3 id="random-riffle-shuffle">Random Riffle Shuffle</h3>
<p>On the other hand, if you are as clumsy as I am, you may not be able to perform a Complete Riffle Shuffle consistently, then you would end up doing what I call Random Riffle Shuffle. This is when two halves of the cards stack on top of each other but not perfectly one card after the other. This seems to be more common among people who perform a riffle shuffle. This method causes more friction among the cards so it is harder to perform a following trick compared to Complete Riffle.</p>
<p><center><img alt="Random Riffle Shuffle" src="images/poker_shuffle_simulation/random_riffle_shuffle.png" width="450"/></center></p>
<p>One can implement this strategy on top of Complete Riffle Shuffle but it is kind of counter-intuitive. A workaround approach can be something like this. Simulate 52 independent Bernoulli trials with probability, p=0.5 (to maximize randomness), to be 0 or 1. Suppose there are n zeros and 52-n ones. We take the top n cards from deck $X_1$ and sequentially put them in the positions of the zeros and the remaining 52-n cards are sequentially put in the positions of ones.</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">_gen_shuffle_index</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="mf">0.5</span><span class="p">):</span>
    <span class="n">index_0</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">index_1</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">binomial</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">n</span><span class="p">),</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">index_0</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">if</span> <span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">index_1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">index_0</span><span class="p">,</span> <span class="n">index_1</span>

<span class="k">def</span> <span class="nf">random_riffle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">deck</span><span class="p">):</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">deck</span><span class="p">)</span>
    <span class="n">index_0</span><span class="p">,</span> <span class="n">index_1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gen_shuffle_index</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="n">shuffled_tuple</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">index_0</span><span class="p">,</span> <span class="n">deck</span><span class="p">[:</span><span class="nb">len</span><span class="p">(</span><span class="n">index_0</span><span class="p">)])</span> <span class="o">+</span> <span class="nb">zip</span><span class="p">(</span><span class="n">index_1</span><span class="p">,</span> <span class="n">deck</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">index_0</span><span class="p">):])</span>
    <span class="n">shuffled</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">shuffled_tuple</span><span class="p">)]</span>
    <span class="k">return</span> <span class="n">shuffled</span>
</pre></div>
<h1 id="simulation-and-evaluation_2">Simulation and Evaluation</h1>
<p>We always start with a sorted deck $X_0$ and repeat the shuffling process $K$ times. Thus at each time $t$ we record a population of $K$ decks:
$$\{ X_t^k: k = 1, 2, ..., K \}$$</p>
<p>For each card position $i = 1, 2,..., 52$, we calculate the histogram (marginal distribution) of the $K$ cards at position $i$ in the $K$ decks. Denote it by $H_{t,i}$ and normalize it to 1. This histogram has 52 bins, and we can choose a large $K$ (I use $K$ = 10,000) in the simulation. Then we compare this 52-bin histogram to a discrete uniform distribution, $U$, by L1-norm and average them over the 52 positions as a measure of randomness at time $t$.
$$err(t) = \frac{1}{52}\sum_{i=1}^{52}|| H_{t,i} - U ||_{L1} $$</p>
<h1 id="result">Result</h1>
<p>Below is the simulation result with $K$ = 10,000. (<a href="https://github.com/pjthepooh/datascience/blob/master/python/poker_shuffle_simulation.py">code</a> &amp; <a href="https://github.com/pjthepooh/datascience/blob/master/python/poker_shuffle_simulation.ipynb">notebook</a>) </p>
<p><center><img alt="Shuffle Simulation Result" src="images/poker_shuffle_simulation/shuffle_simulation_result.png" width="800"/></center></p>
<p>The result may look surprising because Complete Riffle converges slower than Random Riffle and even the naive shuffle method of Bottom-up. If you think about it, this is actually self-explanatory.</p>
<p>Let's look at an extreme case, say we only shuffle once for each simulation process.</p>
<p>By definition, Complete Riffle only has 2 possible outcomes: your left hand releases the bottom card first and your right hand releases the bottom card first. Then after a large number of simulations, each position $i$ of the deck can only have two outcomes, which is far more than random, i.e. the distribution of the cards is very different than a uniform distribution.</p>
<p>On the other hand, Random Riffle has more randomness by definition because in each shuffle 1) the number of cards in the left hand can be different than right hand, and 2) the cards both sides don't need to stack on each other one by one which causes way more different ways of sorting after the shuffle. However, both riffle strategies are stacking the cards in sequential order, so the randomness (defined) at first won't be too large, but the later will drop quicker because it creates more randomness in each shuffle. (Remember we are looking at the distribution of the cards after a large number of simulations, not comparing the one-time outcome by chance to the original deck!)</p>
<p>For Bottom-up strategy, I hardcoded the number of cards being on top so that it will within interquartile range (middle 50%) because I think this would be in line with what most people do.</p>
<p>If we only shuffle once, after a large number of simulations, each position will have 26 different possible outcomes, so the error drops to 50% at first shuffle. However, the convergence speed is not faster than Random Riffle. </p>
<p><center><img alt="Shuffle 10k" src="images/poker_shuffle_simulation/shuffle_10k.png" width="450"/></center></p>
<p>Let's digest the above explanation by answering this question: how easy is it to guess the bottom card after the first shuffle respectively using these three different shuffle methods.  It is easy to guess if the method is Complete Riffle or Random Riffle. It would be either 1 or 27, though it is harder to guess the middle part of the cards for Random Riffle. If the method is Bottom-up, the bottom card can be anything between 13 and 39, the middle 26 cards, so it is hard to guess even after one shuffle.</p>
<p>Final finding is that, no matter what strategy we use, after the 8th shuffle, the card is pretty random, which means, on average, the card in each position should have equal chance to be any card in the deck. No need to shuffle more than 8 times!</p>
<h1 id="ending">Ending</h1>
<p>Understanding the above may not help you increase your winning rate in a casino, but it is good to know that the way those pro dealers shuffling the cards does not perform better in terms of creating randomness. Some shuffle methods look cool but take longer to finish. I would just stick with a quick simple one and use the time to shuffle more times. Remember, if you are not doing something crazy, we only need to shuffle the deck 8 times! Enjoy playing cards!</p>
            
            <section>
<p id="comment-message">Leave your comments below. </p>
<div class="accordion" id="accordion2">
    <div class="accordion-group">
        <div class="accordion-heading">
            <a class="accordion-toggle disqus-comment-count" data-toggle="collapse" data-parent="#accordion2"
                href="http://www.pjthepooh.com/poker-shuffle-simulation.html#disqus_thread">
                Comments
            </a>
        </div>
        <div id="disqus_thread" class="accordion-body collapse">
            <div class="accordion-inner">
                <div class="comments">
                    <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'pjthepooh';
        var disqus_identifier = 'http://www.pjthepooh.com/poker-shuffle-simulation.html';
    var disqus_url = 'http://www.pjthepooh.com/poker-shuffle-simulation.html';

    (function() {
         var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
         dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
         (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
     })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

                </div>
            </div>
        </div>
    </div>
</div>
</section>

            <hr/>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
            <h4>Published</h4>
            <time pubdate="pubdate" datetime="2017-03-04T20:00:00-08:00">Mar 4, 2017</time>

<h4>Last Updated</h4>
<time datetime="2018-04-14T01:15:00-07:00">Apr 14, 2018</time>

            <h4>Category</h4>
            <a class="category-link" href="http://www.pjthepooh.com/categories.html#data-science-ref">Data Science</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="http://www.pjthepooh.com/tags.html#probability-ref">probability
                    <span>1</span>
</a></li>
                <li><a href="http://www.pjthepooh.com/tags.html#python-ref">python
                    <span>4</span>
</a></li>
                <li><a href="http://www.pjthepooh.com/tags.html#random-ref">random
                    <span>1</span>
</a></li>
                <li><a href="http://www.pjthepooh.com/tags.html#simulation-ref">simulation
                    <span>1</span>
</a></li>
                <li><a href="http://www.pjthepooh.com/tags.html#statistics-ref">statistics
                    <span>1</span>
</a></li>
            </ul>
<h4>Keep in Touch</h4>
    <a href="mailto:huangpj1110@gmail.com" title="My Email Address" class="sidebar-social-links" target="_blank">
    <i class="fa fa-envelope sidebar-social-links"></i></a>
    <a href="https://www.linkedin.com/in/pjhuang" title="My Linkedin Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-linkedin sidebar-social-links"></i></a>
    <a href="https://github.com/pjthepooh" title="My Github Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-github sidebar-social-links"></i></a>
    <a href="https://www.facebook.com/peejay1110" title="My Facebook Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-facebook sidebar-social-links"></i></a>
        </div>
        </section>
</div>
</article>
                </div>
                <div class="span1"></div>
            </div>
        </div>
        <div id="push"></div>
    </div>
<footer>
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-license">&copy; PJ the Pooh 2016</li>


    </ul>
</div>
</footer>            <script src="http://code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

            <script type="text/javascript">
var disqus_shortname = 'pjthepooh';
(function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>
<script  language="javascript" type="text/javascript">
function uncollapse() {
    if (window.location.hash.match(/^#comment-\d+$/)) {
        $('#disqus_thread').collapse('show');
    }
}
</script>
<script type="text/javascript" language="JavaScript">
uncollapse();
window.onhashchange=function(){
    if (window.location.hash.match(/^#comment-\d+$/))
        window.location.reload(true);
}
</script>
<script>
$('#disqus_thread').on('shown', function () {
    var link = document.getElementsByClassName('accordion-toggle');
    var old_innerHTML = link[0].innerHTML;
    $(link[0]).fadeOut(500, function() {
        $(this).text('Click here to hide comments').fadeIn(500);
    });
    $('#disqus_thread').on('hidden', function () {
        $(link[0]).fadeOut(500, function() {
            $(this).text(old_innerHTML).fadeIn(500);
        });
    })
})
</script>


    </body>
    <!-- Theme: Elegant built for Pelican
    License : http://oncrashreboot.com/pelican-elegant -->
</html>